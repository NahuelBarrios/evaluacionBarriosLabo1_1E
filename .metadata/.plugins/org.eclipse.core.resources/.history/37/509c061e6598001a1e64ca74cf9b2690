#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "utn.h"
#include "cliente.h"
#include "prestamo.h"

//***********************************************************************************************************************************

int informeClientes(eCliente arrayCliente[],int sizeCliente)
{
	int retorno = -1;
	int option = 0;
	int j;
	int mayorCliente = 0;
	char nombre[51];
	char apellido[51];
	int idCliente;
	char cuil[51];

	if(arrayCliente != NULL && sizeCliente>0)
	{
		utn_getUnsignedInt("\nSu estado esta: \n1-Cliente con más préstamos activos.\n2-Cliente con más préstamos saldados.\n3-Salir\nIngrese opcion: ","\nError.",1,sizeof(int),1,sizeCliente,3,&option);
		switch(option)
		{
		case 1:
			for(j=0;j<sizeCliente;j++)
			{
				if( arrayCliente[j].isEmptyCliente == 1)
					continue;
				if(arrayCliente[j].masPrestamoActivo > mayorCliente)
				{
					mayorCliente = arrayCliente[j].masPrestamoActivo;
					idCliente = arrayCliente[j].idCliente;
					strcpy(nombre,arrayCliente[j].nombreCliente);
					strcpy(apellido,arrayCliente[j].apellidoCliente);
					strcpy(cuil,arrayCliente[j].cuilCliente);

				}
			}
			printf("\n***************************************\nID: %d\nNombre: %s\nApellido: %s\nCuil: %s\nCliente con más préstamos activos: %d",
			            	                   idCliente,nombre,apellido,cuil,mayorCliente);
			retorno = 0;
			break;
		case 2:
			for(j=0;j<sizeCliente;j++)
			{
				if( arrayCliente[j].isEmptyCliente == 1)
					continue;
				if(arrayCliente[j].masPrestamoSaldo > mayorCliente)
				{
					mayorCliente = arrayCliente[j].masPrestamoSaldo;
					idCliente = arrayCliente[j].idCliente;
					strcpy(nombre,arrayCliente[j].nombreCliente);
					strcpy(apellido,arrayCliente[j].apellidoCliente);
					strcpy(cuil,arrayCliente[j].cuilCliente);

				}
			}
			printf("\n***************************************\nID: %d\nNombre: %s\nApellido: %s\nCuil: %s\nCliente con más préstamos saldados: %d",
					idCliente,nombre,apellido,cuil,mayorCliente);
			retorno = 0;
			break;
		case 3:
			break;
		default: printf("\nIngrese un numero entre el 1 y el 3\n");
		}

		retorno = 0;
	}
	return retorno;
}

//***********************************************************************************************************************************

int informePrestamo(ePrestamo arrayPrestamo[], int sizePrestamo)
{
	int retorno = -1;
	int i;
	float importe;

	if(arrayPrestamo != NULL && sizePrestamo > 0)
	{
		utn_getFloat("\nIngrese un Importe mayor a 1000: ","\nError",1,100000,1,100000,3,&importe);
		while(importe<1000)
		{
			utn_getFloat("\nIngrese un Importe mayor a 1000: ","\nError",1,100000,1,100000,3,&importe);
		}

		for(i=0;i<sizePrestamo;i++)
		{
			if(arrayPrestamo[i].isEmptyPrestamo == 1)
				continue;
			if(arrayPrestamo[i].importePrestamo== importe && strcmp(arrayPrestamo[i].estadoPrestamo,"ACTIVO") == 0)
			{
				printf("\n*******************************************\nid Prestamo: %d\nImporte: %.2f",arrayPrestamo[i].idPrestamo,arrayPrestamo[i].importePrestamo);
			}

		}


		retorno = 0;
	}
	return retorno;
}
